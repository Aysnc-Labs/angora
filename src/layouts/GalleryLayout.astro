---
import '../styles/global.css';
import '../styles/reset.css';
import '../styles/gallery.css';

interface Props {
  title: string;
  description?: string;
  fullscreenHref?: string;
  section?: 'design-system' | 'wireframes' | 'layouts';
}

const { title, description, fullscreenHref, section = 'design-system' } = Astro.props;
const wireframes = [
  { href: '/wireframes/home', label: 'Home' },
];
const pages = [
  { href: '/style-guide', label: 'Style Guide' },
  { href: '/buttons', label: 'Buttons' },
  { href: '/icons', label: 'Icons' },
  { href: '/grid', label: 'Grid' },
  { href: '/cards', label: 'Cards' },
  { href: '/forms', label: 'Forms' },
];
const layouts = [
  { href: '/layouts/home', label: 'Home' },
];
const currentPath = Astro.url.pathname.replace(/\/$/, '') || '/';

const navItems = section === 'wireframes' ? wireframes
  : section === 'layouts' ? layouts
  : pages;

const sectionLabel = section === 'wireframes' ? 'Wireframes'
  : section === 'layouts' ? 'Layouts'
  : 'Design System';
---

<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title} — Design System</title>
  </head>
  <body>
    <div class="gallery-shell">
      <aside class="gallery-sidebar">
        <a href="/" class="gallery-sidebar-back">← Gallery</a>
        <div class="gallery-sidebar-title">{sectionLabel}</div>
        <nav class="gallery-nav">
          {navItems.map(({ href, label }) => (
            <a
              href={href}
              aria-current={currentPath === href.replace(/\/$/, '') ? 'page' : undefined}
            >
              {label}
            </a>
          ))}
        </nav>
      </aside>
      <main class="gallery-page">
        <div class="gallery-page-header">
          <h1>{title}</h1>
          {fullscreenHref && <a href={fullscreenHref} class="gallery-fullscreen-link" target="_blank">View full screen</a>}
        </div>
        {description && <p class="gallery-desc">{description}</p>}
        <slot />
      </main>
    </div>
  </body>
</html>
