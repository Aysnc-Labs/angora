---
interface Props {
  size?: 'sm' | 'md' | 'lg';
  checked?: boolean;
  label?: string;
  name?: string;
  value?: string;
  disabled?: boolean;
}

const { size = 'md', checked, label, name, value, disabled } = Astro.props;

const sizeMap: Record<string, { box: string; icon: number; text: string }> = {
  sm: { box: 'w-4 h-4', icon: 10, text: 'text-sm' },
  md: { box: 'w-5 h-5', icon: 12, text: 'text-base' },
  lg: { box: 'w-6 h-6', icon: 14, text: 'text-lg' },
};

const s = sizeMap[size];
---

<label data-component="Checkbox" class={`group inline-flex items-center gap-2 ${disabled ? 'cursor-not-allowed opacity-50' : 'cursor-pointer'}`}>
  <span class={`relative inline-flex items-center justify-center ${s.box} shrink-0`}>
    <input
      type="checkbox"
      class="sr-only peer"
      checked={checked}
      disabled={disabled}
      name={name}
      value={value}
    />
    <span class={`absolute inset-0 rounded-sm border-2 border-input bg-card group-hover:border-muted-foreground peer-checked:bg-primary peer-checked:border-primary group-hover:peer-checked:bg-primary-hover group-hover:peer-checked:border-primary-hover peer-focus-visible:outline-2 peer-focus-visible:outline-ring peer-focus-visible:outline-offset-2 transition-colors duration-fast ease-default`}></span>
    <svg class="relative opacity-0 peer-checked:opacity-100 text-primary-foreground pointer-events-none" width={s.icon} height={s.icon} viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
      <polyline points="20 6 9 17 4 12" />
    </svg>
  </span>
  {label && <span class={`${s.text} text-foreground`}>{label}</span>}
</label>
