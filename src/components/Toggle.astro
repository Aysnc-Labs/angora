---
interface Props {
  size?: 'sm' | 'md' | 'lg';
  checked?: boolean;
  label?: string;
  name?: string;
  value?: string;
  disabled?: boolean;
}

const { size = 'md', checked, label, name, value, disabled } = Astro.props;

const sizeMap: Record<string, { track: string; thumb: string; translate: string; text: string }> = {
  sm: { track: 'w-8 h-5', thumb: 'w-3.5 h-3.5', translate: 'peer-checked:translate-x-3.5', text: 'text-sm' },
  md: { track: 'w-10 h-6', thumb: 'w-4.5 h-4.5', translate: 'peer-checked:translate-x-4.5', text: 'text-base' },
  lg: { track: 'w-12 h-7', thumb: 'w-5.5 h-5.5', translate: 'peer-checked:translate-x-5.5', text: 'text-lg' },
};

const s = sizeMap[size];
---

<label data-component="Toggle" class={`group inline-flex items-center gap-3 ${disabled ? 'cursor-not-allowed opacity-50' : 'cursor-pointer'}`}>
  <span class={`relative inline-flex items-center p-0.5 ${s.track} shrink-0`}>
    <input
      type="checkbox"
      class="sr-only peer"
      checked={checked}
      disabled={disabled}
      name={name}
      value={value}
    />
    <span class={`absolute inset-0 rounded-full bg-input group-hover:bg-muted-foreground peer-checked:bg-primary group-hover:peer-checked:bg-primary-hover peer-focus-visible:outline-2 peer-focus-visible:outline-ring peer-focus-visible:outline-offset-2 transition-colors duration-fast ease-default`}></span>
    <span class={`relative ${s.thumb} rounded-full bg-primary-foreground shadow-sm translate-x-0 ${s.translate} transition-transform duration-fast ease-default`}></span>
  </span>
  {label && <span class={`${s.text} text-foreground`}>{label}</span>}
</label>
